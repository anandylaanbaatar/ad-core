<template>
  <div class="c-player">
    <Loader v-if="loading" type="none"></Loader>

    <media-controller>
      <mux-video
        v-if="provider === 'video'"
        ref="player"
        :muted="controls.muted"
        slot="media"
        :src="src"
      ></mux-video>

      <mux-video
        v-if="provider === 'hls'"
        ref="player"
        autoplay
        playsinline
        :muted="controls.muted"
        crossorigin
        slot="media"
        :src="src"
        type="hls"
      ></mux-video>

      <youtube-video
        v-if="provider === 'youtube'"
        ref="player"
        :muted="controls.muted"
        :src="src"
        slot="media"
        crossorigin
      ></youtube-video>

      <vimeo-video
        v-if="provider === 'vimeo'"
        ref="player"
        :muted="controls.muted"
        :src="src"
        slot="media"
        crossorigin
      ></vimeo-video>

      <media-poster-image
        v-if="poster"
        slot="poster"
        :src="poster"
      ></media-poster-image>
      <media-control-bar>
        <media-loading-indicator
          slot="centered-chrome"
        ></media-loading-indicator>
        <media-play-button v-if="!hls">
          <svg
            slot="play"
            aria-hidden="true"
            viewBox="0 0 48 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon_button_svg"
          >
            <path
              d="M39.72 22.26L15.72 10.26C15.12 9.95997 14.4 9.98997 13.83 10.35C13.26 10.71 12.9 11.34 12.9 12L12.9 36C12.9 36.69 13.26 37.29 13.83 37.65C14.13 37.83 14.49 37.95 14.85 37.95C15.15 37.95 15.45 37.89 15.72 37.74L39.72 25.74C40.38 25.41 40.8 24.75 40.8 24C40.8 23.25 40.38 22.59 39.72 22.26Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="pause"
            aria-hidden="true"
            viewBox="0 0 48 48"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon_button_svg"
          >
            <path
              d="M21 13.5L21 34.5C21 35.325 20.325 36 19.5 36H13.5C12.675 36 12 35.325 12 34.5L12 13.5C12 12.675 12.675 12 13.5 12L19.5 12C20.325 12 21 12.675 21 13.5ZM34.5 12L28.5 12C27.675 12 27 12.675 27 13.5L27 34.5C27 35.325 27.675 36 28.5 36H34.5C35.325 36 36 35.325 36 34.5V13.5C36 12.675 35.325 12 34.5 12Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-play-button>
        <media-live-button v-if="hls"></media-live-button>
        <media-time-range
          v-if="!hls"
          class="media-time-range"
        ></media-time-range>
        <media-time-display v-if="!hls"></media-time-display>
        <div class="control-bar-divider"></div>
        <media-mute-button>
          <svg
            slot="high"
            aria-hidden="true"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon_button_svg"
          >
            <path
              d="M12.3749 3.59998C12.0149 3.44998 11.5949 3.52498 11.3099 3.80998L7.0949 8.02498H3.7499C3.2099 8.02498 2.7749 8.45998 2.7749 8.99998L2.7749 15C2.7749 15.54 3.2099 15.975 3.7499 15.975H7.0949L11.3099 20.19C11.4899 20.37 11.7449 20.475 11.9999 20.475C12.1199 20.475 12.2549 20.445 12.3749 20.4C12.7349 20.25 12.9749 19.89 12.9749 19.5L12.9749 4.49998C12.9749 4.10998 12.7349 3.74998 12.3749 3.59998ZM11.0249 17.145L8.1899 14.31C8.0099 14.13 7.7549 14.025 7.4999 14.025H4.7249L4.7249 9.97498H7.4999C7.7549 9.97498 8.0099 9.86998 8.1899 9.68998L11.0249 6.85498L11.0249 17.145ZM18.5249 5.47498C18.1499 5.09998 17.5199 5.09998 17.1449 5.47498C16.7699 5.84998 16.7699 6.47998 17.1449 6.85498C18.5249 8.23498 19.2749 10.05 19.2749 12C19.2749 13.95 18.5249 15.765 17.1449 17.145C16.7699 17.52 16.7699 18.15 17.1449 18.525C17.3399 18.72 17.5799 18.81 17.8349 18.81C18.0899 18.81 18.3299 18.72 18.5249 18.525C20.2649 16.785 21.2249 14.46 21.2249 12C21.2249 9.53998 20.2649 7.21498 18.5249 5.47498ZM15.8699 8.12998C15.4949 7.75498 14.8649 7.75498 14.4899 8.12998C14.1149 8.50498 14.1149 9.13498 14.4899 9.50998C15.1499 10.17 15.5249 11.055 15.5249 12C15.5249 12.945 15.1649 13.83 14.4899 14.49C14.1149 14.865 14.1149 15.495 14.4899 15.87C14.6849 16.065 14.9249 16.155 15.1799 16.155C15.4349 16.155 15.6749 16.065 15.8699 15.87C16.9049 14.835 17.4749 13.455 17.4749 12C17.4749 10.545 16.9049 9.16498 15.8699 8.12998Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="low"
            aria-hidden="true"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon_button_svg"
          >
            <path
              d="M8.2501 2.39999C8.0101 2.29999 7.7301 2.34999 7.5401 2.53999L4.7301 5.34999H2.5001C2.1401 5.34999 1.8501 5.63999 1.8501 5.99999V9.99999C1.8501 10.36 2.1401 10.65 2.5001 10.65H4.7301L7.5401 13.46C7.6601 13.58 7.8301 13.65 8.0001 13.65C8.0801 13.65 8.1701 13.63 8.2501 13.6C8.4901 13.5 8.6501 13.26 8.6501 13V2.99999C8.6501 2.73999 8.4901 2.49999 8.2501 2.39999ZM7.3501 11.43L5.4601 9.53999C5.3401 9.41999 5.1701 9.34999 5.0001 9.34999H3.1501V6.64999H5.0001C5.1701 6.64999 5.3401 6.57999 5.4601 6.45999L7.3501 4.56999V11.43ZM12.3501 3.64999C12.1001 3.39999 11.6801 3.39999 11.4301 3.64999C11.1801 3.89999 11.1801 4.31999 11.4301 4.56999C12.3501 5.48999 12.8501 6.69999 12.8501 7.99999C12.8501 9.29999 12.3501 10.51 11.4301 11.43C11.1801 11.68 11.1801 12.1 11.4301 12.35C11.5601 12.48 11.7201 12.54 11.8901 12.54C12.0601 12.54 12.2201 12.48 12.3501 12.35C13.5101 11.19 14.1501 9.63999 14.1501 7.99999C14.1501 6.35999 13.5101 4.80999 12.3501 3.64999ZM10.5801 5.41999C10.3301 5.16999 9.9101 5.16999 9.6601 5.41999C9.4101 5.66999 9.4101 6.08999 9.6601 6.33999C10.1001 6.77999 10.3501 7.36999 10.3501 7.99999C10.3501 8.62999 10.1101 9.21999 9.6601 9.65999C9.4101 9.90999 9.4101 10.33 9.6601 10.58C9.7901 10.71 9.9501 10.77 10.1201 10.77C10.2901 10.77 10.4501 10.71 10.5801 10.58C11.2701 9.88999 11.6501 8.96999 11.6501 7.99999C11.6501 7.02999 11.2701 6.10999 10.5801 5.41999Z"
              fill="white"
              fill-opacity="0.4"
            ></path>
            <path
              d="M8.2501 2.39999C8.0101 2.29999 7.7301 2.34999 7.5401 2.53999L4.7301 5.34999H2.5001C2.1401 5.34999 1.8501 5.63999 1.8501 5.99999V9.99999C1.8501 10.36 2.1401 10.65 2.5001 10.65H4.7301L7.5401 13.46C7.6601 13.58 7.8301 13.65 8.0001 13.65C8.0801 13.65 8.1701 13.63 8.2501 13.6C8.4901 13.5 8.6501 13.26 8.6501 13V2.99999C8.6501 2.73999 8.4901 2.49999 8.2501 2.39999ZM7.3501 11.43L5.4601 9.53999C5.3401 9.41999 5.1701 9.34999 5.0001 9.34999H3.1501V6.64999H5.0001C5.1701 6.64999 5.3401 6.57999 5.4601 6.45999L7.3501 4.56999V11.43ZM10.5801 5.41999C10.3301 5.16999 9.9101 5.16999 9.6601 5.41999C9.4101 5.66999 9.4101 6.08999 9.6601 6.33999C10.1001 6.77999 10.3501 7.36999 10.3501 7.99999C10.3501 8.62999 10.1101 9.21999 9.6601 9.65999C9.4101 9.90999 9.4101 10.33 9.6601 10.58C9.7901 10.71 9.9501 10.77 10.1201 10.77C10.2901 10.77 10.4501 10.71 10.5801 10.58C11.2701 9.88999 11.6501 8.96999 11.6501 7.99999C11.6501 7.02999 11.2701 6.10999 10.5801 5.41999Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="off"
            aria-hidden="true"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="icon_button_svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12.3731 3.59921C12.7375 3.75012 12.975 4.10564 12.975 4.49999V19.5C12.975 19.8943 12.7375 20.2499 12.3731 20.4008C12.0088 20.5517 11.5894 20.4683 11.3106 20.1894L7.09614 15.975H3.75C3.21152 15.975 2.775 15.5385 2.775 15V8.99999C2.775 8.46151 3.21152 8.02499 3.75 8.02499H7.09614L11.3106 3.81056C11.5894 3.53171 12.0088 3.4483 12.3731 3.59921ZM11.025 6.85385L8.18943 9.68942C8.00658 9.87227 7.75859 9.97499 7.5 9.97499H4.725V14.025H7.5C7.75859 14.025 8.00658 14.1277 8.18943 14.3106L11.025 17.1461V6.85385Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.7606 9.06056C15.1413 8.6798 15.7587 8.6798 16.1394 9.06056L20.6394 13.5606C21.0202 13.9413 21.0202 14.5587 20.6394 14.9394C20.2587 15.3202 19.6413 15.3202 19.2606 14.9394L14.7606 10.4394C14.3798 10.0587 14.3798 9.44132 14.7606 9.06056Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.6394 9.06056C21.0202 9.44132 21.0202 10.0587 20.6394 10.4394L16.1394 14.9394C15.7587 15.3202 15.1413 15.3202 14.7606 14.9394C14.3798 14.5587 14.3798 13.9413 14.7606 13.5606L19.2606 9.06056C19.6413 8.6798 20.2587 8.6798 20.6394 9.06056Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-mute-button>
        <media-volume-range></media-volume-range>
        <media-captions-button v-if="hls && false">
          <svg
            slot="off"
            aria-hidden="true"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            :style="'opacity:0.6;'"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.5249 12.75C6.5249 12.2115 6.96142 11.775 7.4999 11.775H8.53081C9.06929 11.775 9.50581 12.2115 9.50581 12.75C9.50581 13.2885 9.06929 13.725 8.53081 13.725H7.4999C6.96142 13.725 6.5249 13.2885 6.5249 12.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.5102 15.75C14.5102 15.2115 14.9467 14.775 15.4852 14.775H16.4997C17.0382 14.775 17.4747 15.2115 17.4747 15.75C17.4747 16.2885 17.0382 16.725 16.4997 16.725H15.4852C14.9467 16.725 14.5102 16.2885 14.5102 15.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.2374 12.75C11.2374 12.2115 11.674 11.775 12.2124 11.775H16.4997C17.0382 11.775 17.4747 12.2115 17.4747 12.75C17.4747 13.2885 17.0382 13.725 16.4997 13.725H12.2124C11.674 13.725 11.2374 13.2885 11.2374 12.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.5249 15.75C6.5249 15.2115 6.96142 14.775 7.4999 14.775L11.8035 14.775C12.342 14.775 12.7785 15.2115 12.7785 15.75C12.7785 16.2885 12.342 16.725 11.8035 16.725H7.4999C6.96142 16.725 6.5249 16.2885 6.5249 15.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M5.32133 5.47502C4.94869 5.47502 4.7249 5.75232 4.7249 6.00002L4.7249 18C4.7249 18.2477 4.94869 18.525 5.32133 18.525H18.6785C19.0511 18.525 19.2749 18.2477 19.2749 18V6.00002C19.2749 5.75232 19.0511 5.47502 18.6785 5.47502L5.32133 5.47502ZM2.7749 6.00002C2.7749 4.59087 3.95822 3.52502 5.32133 3.52502L18.6785 3.52502C20.0416 3.52502 21.2249 4.59087 21.2249 6.00002V18C21.2249 19.4092 20.0416 20.475 18.6785 20.475L5.32133 20.475C3.95822 20.475 2.7749 19.4092 2.7749 18L2.7749 6.00002Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="on"
            aria-hidden="true"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.5249 12.75C6.5249 12.2115 6.96142 11.775 7.4999 11.775H8.53081C9.06929 11.775 9.50581 12.2115 9.50581 12.75C9.50581 13.2885 9.06929 13.725 8.53081 13.725H7.4999C6.96142 13.725 6.5249 13.2885 6.5249 12.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.5102 15.75C14.5102 15.2115 14.9467 14.775 15.4852 14.775H16.4997C17.0382 14.775 17.4747 15.2115 17.4747 15.75C17.4747 16.2885 17.0382 16.725 16.4997 16.725H15.4852C14.9467 16.725 14.5102 16.2885 14.5102 15.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M11.2374 12.75C11.2374 12.2115 11.674 11.775 12.2124 11.775H16.4997C17.0382 11.775 17.4747 12.2115 17.4747 12.75C17.4747 13.2885 17.0382 13.725 16.4997 13.725H12.2124C11.674 13.725 11.2374 13.2885 11.2374 12.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M6.5249 15.75C6.5249 15.2115 6.96142 14.775 7.4999 14.775L11.8035 14.775C12.342 14.775 12.7785 15.2115 12.7785 15.75C12.7785 16.2885 12.342 16.725 11.8035 16.725H7.4999C6.96142 16.725 6.5249 16.2885 6.5249 15.75Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M5.32133 5.47502C4.94869 5.47502 4.7249 5.75232 4.7249 6.00002L4.7249 18C4.7249 18.2477 4.94869 18.525 5.32133 18.525H18.6785C19.0511 18.525 19.2749 18.2477 19.2749 18V6.00002C19.2749 5.75232 19.0511 5.47502 18.6785 5.47502L5.32133 5.47502ZM2.7749 6.00002C2.7749 4.59087 3.95822 3.52502 5.32133 3.52502L18.6785 3.52502C20.0416 3.52502 21.2249 4.59087 21.2249 6.00002V18C21.2249 19.4092 20.0416 20.475 18.6785 20.475L5.32133 20.475C3.95822 20.475 2.7749 19.4092 2.7749 18L2.7749 6.00002Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-captions-button>
        <media-pip-button>
          <svg
            slot="exit"
            aria-hidden="true"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2.5 3.6501C2.30899 3.6501 2.15 3.80908 2.15 4.0001V11.5001C2.15 11.6911 2.30899 11.8501 2.5 11.8501H6.5C6.85899 11.8501 7.15 12.1411 7.15 12.5001C7.15 12.8591 6.85899 13.1501 6.5 13.1501H2.5C1.59102 13.1501 0.85 12.4091 0.85 11.5001V4.0001C0.85 3.09111 1.59102 2.3501 2.5 2.3501H11.5C12.409 2.3501 13.15 3.09111 13.15 4.0001V6.5001C13.15 6.85908 12.859 7.1501 12.5 7.1501C12.141 7.1501 11.85 6.85908 11.85 6.5001V4.0001C11.85 3.80908 11.691 3.6501 11.5 3.6501H2.5Z"
              fill="white"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M8.35 10.0001C8.35 9.08883 9.08873 8.3501 10 8.3501H13.5C14.4113 8.3501 15.15 9.08883 15.15 10.0001V12.5001C15.15 13.4114 14.4113 14.1501 13.5 14.1501H10C9.08873 14.1501 8.35 13.4114 8.35 12.5001V10.0001Z"
              fill="white"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M3.25 5.0001C3.25 4.86203 3.36193 4.7501 3.5 4.7501H10.5C10.6381 4.7501 10.75 4.86203 10.75 5.0001V6.9001C10.75 7.03817 10.6381 7.1501 10.5 7.1501H9.4C8.20678 7.1501 7.15 8.19946 7.15 9.3901V10.5001C7.15 10.6382 7.03807 10.7501 6.9 10.7501H3.5C3.36193 10.7501 3.25 10.6382 3.25 10.5001V5.0001Z"
              fill="white"
            ></path>
          </svg>
          <svg
            slot="enter"
            viewBox="0 0 24 24"
            aria-hidden="true"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M3.7499 5.47502C3.46338 5.47502 3.2249 5.7135 3.2249 6.00002L3.2249 17.25C3.2249 17.5365 3.46338 17.775 3.7499 17.775H9.7499C10.2884 17.775 10.7249 18.2115 10.7249 18.75C10.7249 19.2885 10.2884 19.725 9.7499 19.725H3.7499C2.38642 19.725 1.2749 18.6135 1.2749 17.25L1.2749 6.00002C1.2749 4.63655 2.38642 3.52502 3.7499 3.52502L17.2499 3.52502C18.6134 3.52502 19.7249 4.63655 19.7249 6.00002V9.75003C19.7249 10.2885 19.2884 10.725 18.7499 10.725C18.2114 10.725 17.7749 10.2885 17.7749 9.75003V6.00002C17.7749 5.7135 17.5364 5.47502 17.2499 5.47502L3.7499 5.47502Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.9999 14.475C14.71 14.475 14.4749 14.7101 14.4749 15V18.75C14.4749 19.04 14.71 19.275 14.9999 19.275H20.2499C20.5399 19.275 20.7749 19.04 20.7749 18.75L20.7749 15C20.7749 14.7101 20.5399 14.475 20.2499 14.475H14.9999ZM12.5249 15C12.5249 13.6331 13.633 12.525 14.9999 12.525H20.2499C21.6168 12.525 22.7249 13.6331 22.7249 15L22.7249 18.75C22.7249 20.1169 21.6168 21.225 20.2499 21.225L14.9999 21.225C13.633 21.225 12.5249 20.1169 12.5249 18.75V15Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-pip-button>
        <media-cast-button></media-cast-button>
        <media-airplay-button>
          <svg
            slot="exit"
            class="icon--pressed"
            role="presentation"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M12.77 13.36C12.6762 13.2468 12.5585 13.1556 12.4254 13.093C12.2923 13.0305 12.1471 12.998 12 12.998C11.8529 12.998 11.7077 13.0305 11.5746 13.093C11.4415 13.1556 11.3238 13.2468 11.23 13.36L7.07 18.36C6.94882 18.5055 6.87142 18.6824 6.84682 18.8701C6.82222 19.0578 6.85143 19.2487 6.93104 19.4205C7.01065 19.5923 7.13739 19.7379 7.29653 19.8405C7.45567 19.9431 7.64067 19.9984 7.83 20H16.17C16.3593 19.9984 16.5443 19.9431 16.7035 19.8405C16.8626 19.7379 16.9894 19.5923 17.069 19.4205C17.1486 19.2487 17.1778 19.0578 17.1532 18.8701C17.1286 18.6824 17.0512 18.5055 16.93 18.36L12.77 13.36ZM19 4L5 4C4.20435 4 3.44129 4.31607 2.87868 4.87868C2.31607 5.44129 2 6.20435 2 7L2 14C2 14.7956 2.31607 15.5587 2.87868 16.1213C3.44129 16.6839 4.20435 17 5 17H6C6.26522 17 6.51957 16.8946 6.70711 16.7071C6.89464 16.5196 7 16.2652 7 16C7 15.7348 6.89464 15.4804 6.70711 15.2929C6.51957 15.1054 6.26522 15 6 15H5C4.73478 15 4.48043 14.8946 4.29289 14.7071C4.10536 14.5196 4 14.2652 4 14L4 7C4 6.73478 4.10536 6.48043 4.29289 6.29289C4.48043 6.10536 4.73478 6 5 6L19 6C19.2652 6 19.5196 6.10536 19.7071 6.29289C19.8946 6.48043 20 6.73478 20 7V14C20 14.2652 19.8946 14.5196 19.7071 14.7071C19.5196 14.8946 19.2652 15 19 15H18C17.7348 15 17.4804 15.1054 17.2929 15.2929C17.1054 15.4804 17 15.7348 17 16C17 16.2652 17.1054 16.5196 17.2929 16.7071C17.4804 16.8946 17.7348 17 18 17H19C19.7956 17 20.5587 16.6839 21.1213 16.1213C21.6839 15.5587 22 14.7956 22 14V7C22 6.20435 21.6839 5.44129 21.1213 4.87868C20.5587 4.31607 19.7956 4 19 4Z"
              fill="currentColor"
            ></path>
            <path
              d="M6.5 13.5H9.08L10.77 11.5C10.9256 11.3283 11.1154 11.1911 11.3273 11.0972C11.5391 11.0033 11.7683 10.9548 12 10.9548C12.2317 10.9548 12.4609 11.0033 12.6727 11.0972C12.8846 11.1911 13.0744 11.3283 13.23 11.5L14.92 13.5H17.5C17.7652 13.5 18.0196 13.3946 18.2071 13.2071C18.3946 13.0196 18.5 12.7652 18.5 12.5V8.5C18.5 8.23478 18.3946 7.98043 18.2071 7.79289C18.0196 7.60536 17.7652 7.5 17.5 7.5L6.5 7.5C6.23478 7.5 5.98043 7.60536 5.79289 7.79289C5.60536 7.98043 5.5 8.23478 5.5 8.5L5.5 12.5C5.5 12.7652 5.60536 13.0196 5.79289 13.2071C5.98043 13.3946 6.23478 13.5 6.5 13.5Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="enter"
            class="icon--not-pressed"
            role="presentation"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6 15C6.26522 15 6.51957 15.1054 6.70711 15.2929C6.89464 15.4804 7 15.7348 7 16C7 16.2652 6.89464 16.5196 6.70711 16.7071C6.51957 16.8946 6.26522 17 6 17H5C4.20435 17 3.44129 16.6839 2.87868 16.1213C2.31607 15.5587 2 14.7956 2 14L2 7C2 6.20435 2.31607 5.44129 2.87868 4.87868C3.44129 4.31607 4.20435 4 5 4L19 4C19.7956 4 20.5587 4.31607 21.1213 4.87868C21.6839 5.44129 22 6.20435 22 7V14C22 14.7956 21.6839 15.5587 21.1213 16.1213C20.5587 16.6839 19.7956 17 19 17H18C17.7348 17 17.4804 16.8946 17.2929 16.7071C17.1054 16.5196 17 16.2652 17 16C17 15.7348 17.1054 15.4804 17.2929 15.2929C17.4804 15.1054 17.7348 15 18 15H19C19.2652 15 19.5196 14.8946 19.7071 14.7071C19.8946 14.5196 20 14.2652 20 14V7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6L5 6C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7L4 14C4 14.2652 4.10536 14.5196 4.29289 14.7071C4.48043 14.8946 4.73478 15 5 15H6Z"
              fill="currentColor"
            ></path>
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M12 13C12.3038 13 12.5911 13.1381 12.7809 13.3753L16.7809 18.3753C17.021 18.6755 17.0678 19.0867 16.9013 19.4332C16.7348 19.7797 16.3844 20 16 20H8C7.61559 20 7.26522 19.7797 7.0987 19.4332C6.93218 19.0867 6.97899 18.6755 7.21913 18.3753L11.2191 13.3753C11.4089 13.1381 11.6962 13 12 13Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-airplay-button>
        <media-fullscreen-button>
          <svg
            slot="exit"
            class="icon--pressed"
            role="presentation"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20 8C20.5523 8 21 8.44772 21 9C21 9.55228 20.5523 10 20 10H17C15.3431 10 14 8.65685 14 7V4C14 3.44772 14.4477 3 15 3C15.5523 3 16 3.44772 16 4V7C16 7.55228 16.4477 8 17 8H20ZM16 20C16 20.5523 15.5523 21 15 21C14.4477 21 14 20.5523 14 20V17C14 15.3431 15.3431 14 17 14H20C20.5523 14 21 14.4477 21 15C21 15.5523 20.5523 16 20 16H17C16.4477 16 16 16.4477 16 17V20ZM4 16C3.44772 16 3 15.5523 3 15C3 14.4477 3.44772 14 4 14H7C8.65685 14 10 15.3431 10 17V20C10 20.5523 9.55228 21 9 21C8.44772 21 8 20.5523 8 20V17C8 16.4477 7.55228 16 7 16H4ZM8 4C8 3.44772 8.44772 3 9 3C9.55228 3 10 3.44772 10 4V7C10 8.65685 8.65685 10 7 10H4C3.44772 10 3 9.55228 3 9C3 8.44772 3.44772 8 4 8H7C7.55228 8 8 7.55228 8 7L8 4Z"
              fill="currentColor"
            ></path>
          </svg>
          <svg
            slot="enter"
            class="icon--not-pressed"
            role="presentation"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15 5C14.7348 5 14.4804 4.89464 14.2929 4.70711C14.1054 4.51957 14 4.26522 14 4C14 3.73478 14.1054 3.48043 14.2929 3.29289C14.4804 3.10536 14.7348 3 15 3L18 3C18.7956 3 19.5587 3.31607 20.1213 3.87868C20.6839 4.44129 21 5.20435 21 6V9C21 9.26522 20.8946 9.51957 20.7071 9.70711C20.5196 9.89464 20.2652 10 20 10C19.7348 10 19.4804 9.89464 19.2929 9.70711C19.1054 9.51957 19 9.26522 19 9V6C19 5.73478 18.8946 5.48043 18.7071 5.29289C18.5196 5.10536 18.2652 5 18 5H15ZM19 15C19 14.7348 19.1054 14.4804 19.2929 14.2929C19.4804 14.1054 19.7348 14 20 14C20.2652 14 20.5196 14.1054 20.7071 14.2929C20.8946 14.4804 21 14.7348 21 15L21 18C21 18.7956 20.6839 19.5587 20.1213 20.1213C19.5587 20.6839 18.7956 21 18 21L15 21C14.7348 21 14.4804 20.8946 14.2929 20.7071C14.1054 20.5196 14 20.2652 14 20C14 19.7348 14.1054 19.4804 14.2929 19.2929C14.4804 19.1054 14.7348 19 15 19L18 19C18.2652 19 18.5196 18.8946 18.7071 18.7071C18.8946 18.5196 19 18.2652 19 18V15ZM9 19C9.26522 19 9.51957 19.1054 9.70711 19.2929C9.89464 19.4804 10 19.7348 10 20C10 20.2652 9.89464 20.5196 9.70711 20.7071C9.51957 20.8946 9.26522 21 9 21H6C5.20435 21 4.44129 20.6839 3.87868 20.1213C3.31607 19.5587 3 18.7956 3 18L3 15C3 14.7348 3.10536 14.4804 3.29289 14.2929C3.48043 14.1054 3.73478 14 4 14C4.26522 14 4.51957 14.1054 4.70711 14.2929C4.89464 14.4804 5 14.7348 5 15V18C5 18.2652 5.10536 18.5196 5.29289 18.7071C5.48043 18.8946 5.73478 19 6 19H9ZM5 9C5 9.26522 4.89464 9.51957 4.70711 9.70711C4.51957 9.89464 4.26522 10 4 10C3.73478 10 3.48043 9.89464 3.29289 9.70711C3.10536 9.51957 3 9.26522 3 9L3 6C3 5.20435 3.31607 4.44129 3.87868 3.87868C4.44129 3.31607 5.20435 3 6 3L9 3C9.26522 3 9.51957 3.10536 9.70711 3.29289C9.89464 3.48043 10 3.73478 10 4C10 4.26522 9.89464 4.51957 9.70711 4.70711C9.51957 4.89464 9.26522 5 9 5L6 5C5.73478 5 5.48043 5.10536 5.29289 5.29289C5.10536 5.48043 5 5.73478 5 6L5 9Z"
              fill="currentColor"
            ></path>
          </svg>
        </media-fullscreen-button>
      </media-control-bar>
    </media-controller>
  </div>
</template>

<script>
import "media-chrome"
import "@mux/mux-video"

export default {
  props: {
    provider: {
      type: String,
      default: null,
    },
    src: {
      type: String,
      default: null,
    },
    poster: {
      type: String,
      default: null,
    },
  },

  data() {
    return {
      loading: false,
      useCors: false,

      video: {
        loading: true,
        quality: 1080,
        type: "application/x-mpegurl",
        src: "https://cdn.plyr.io/static/blank.mp4",
      },

      controls: {
        muted: false,
        captions: false,
      },
    }
  },

  computed: {
    hls() {
      if (this.provider === "hls") {
        return true
      }
      return false
    },
  },

  beforeMount() {
    if (this.provider === "vimeo") {
      useHead({
        script: [
          {
            type: "module",
            src: "https://cdn.jsdelivr.net/npm/vimeo-video-element@1.1/+esm",
          },
        ],
      })
    } else if (this.provider === "youtube") {
      useHead({
        script: [
          {
            type: "module",
            src: "https://cdn.jsdelivr.net/npm/youtube-video-element@1.1/+esm",
          },
        ],
      })
    } else if (this.provider === "hls") {
      this.controls.muted = true

      useHead({
        script: [
          {
            type: "module",
            src: "https://cdn.jsdelivr.net/npm/hls-video-element@1.2/+esm",
          },
        ],
      })
    } else if (this.provider === "dash") {
      useHead({
        script: [
          {
            type: "module",
            src: "https://cdn.jsdelivr.net/npm/dash-video-element@0.0/+esm",
          },
        ],
      })
    }
  },
  mounted() {
    this.playerEvents()
  },

  methods: {
    playerEvents() {
      // https://www.media-chrome.org/docs/en/media-elements/hls-video
      // https://www.mux.com/docs/guides/player-advanced-usage

      if (this.$refs.player) {
        this.player = this.$refs.player

        this.player.addEventListener("canplay", (e) => {
          console.log("[Mux] ::: CanPlay!")
        })
        this.player.addEventListener("canplaythrough", (e) => {
          // console.log("[Mux] ::: Can Play Through :: ", e)
        })
        this.player.addEventListener("stalled", (e) => {
          // this.loading = true
          // console.log("[Mux] ::: Stalled :: ", e)
        })
        this.player.addEventListener("timeupdate", (e) => {
          // console.log("[Mux] ::: Time :: ", e)
        })
        this.player.addEventListener("loadeddata", (e) => {
          console.log("[Mux] ::: Loaded Data!")
        })
        this.player.addEventListener("loadedmetadata", (e) => {
          console.log("[Mux] ::: Loaded Metadata!")
        })
        this.player.addEventListener("pause", (e) => {
          console.log("[Mux] ::: Paused!")

          if (this.provider === "hls") {
            this.player.play()
          }
        })
        this.player.addEventListener("play", (e) => {
          // console.log("[Mux] ::: Played :: ", e)
        })
        this.player.addEventListener("playing", (e) => {
          console.log("[Mux] ::: Playing!")
          this.loading = false
        })
        this.player.addEventListener("ratechange", (e) => {
          console.log("[Mux] ::: Rate Change :: ", e)
        })
        this.player.addEventListener("suspend", (e) => {
          console.log("[Mux] ::: Suspended :: ", e)
        })
        this.player.addEventListener("waiting", (e) => {
          console.log("[Mux] ::: Waiting!")
        })
        this.player.addEventListener("error", (e) => {
          console.log("[Mux] ::: Error :: ", e.type)
          this.loading = false
        })
      }
    },
  },
}
</script>
